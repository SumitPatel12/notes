_____
**Created**: 14-10-2024 08:56 am
**Status**: Completed
**Tags**: #Rust #RustExpressions [[Rust]] [[Rust Expressions]]
**References**: 
______

*Expressions have values statements don't.* 
Rust is what we call an expression language. In `C`, `if` and `switch` are statements, i.e. they do not produce a value, and they can't be use in the middle of an expression. Whereas in Rust `if` and `match` can produce values.
```rust
pixels[r * bounds.0 + c] = 
	match escapes(Complex { re: point.0, im: point.1 }, 255) {
		None => 0,
		Some(count) => 255 - count as u8;
	};

let status = if cpu.temperature <= MAX_TEMP {
	HttpStatus::Ok
} else {
	HttpStatus::ServerError
}
```

### Precedence and Associativity
Operators are listed in the order of precedence, from highest to lowest.

| Expression Type          | Example                                                                                                                                                                                                                                                                   | Related Traits                                                                                                                         |
| ------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------- |
| Array literal            | [1, 2, 3]                                                                                                                                                                                                                                                                 |                                                                                                                                        |
| Repeat array literal     | [0: 50]                                                                                                                                                                                                                                                                   |                                                                                                                                        |
|                          |                                                                                                                                                                                                                                                                           |                                                                                                                                        |
|                          |                                                                                                                                                                                                                                                                           |                                                                                                                                        |
| Grouping                 | (2 + 2)                                                                                                                                                                                                                                                                   |                                                                                                                                        |
| Block                    | { f(); g() }                                                                                                                                                                                                                                                              |                                                                                                                                        |
| Control Flow Expressions | if ok { f() }<br>if ok { 1 } else { 0 }<br>if let Some(x) = f() { x } else { 0 }<br>match x { None => 0, _ => 1 }<br>for v in e { f(v); }<br>while ok { ok = f(v); }<br>while let Some(x) = it.next() { f(x); }<br>loop { next_event() }<br>break<br>continue<br>return 0 | std::iter::IntoIterator                                                                                                                |
| Macro Invocation         | println!("OK")                                                                                                                                                                                                                                                            |                                                                                                                                        |
| Path                     | std::f64::consts::PI                                                                                                                                                                                                                                                      |                                                                                                                                        |
|                          |                                                                                                                                                                                                                                                                           |                                                                                                                                        |
| Struct Literal           | Point { x: 0, y: 0 }                                                                                                                                                                                                                                                      |                                                                                                                                        |
|                          |                                                                                                                                                                                                                                                                           |                                                                                                                                        |
| Tuple Field Access       | pair.0                                                                                                                                                                                                                                                                    | Deref, DerefMut                                                                                                                        |
| Struct Field Access      | point.x                                                                                                                                                                                                                                                                   | Deref, DerefMut                                                                                                                        |
| Method Call              | point.translate(50, 50)                                                                                                                                                                                                                                                   | Deref, DerefMut                                                                                                                        |
| Function Call            | stdin()                                                                                                                                                                                                                                                                   | Fn(Arg0, ...) -> T,<br>FnMut(Arg0, ...) -> T,<br>FnOnce(Arg0, ...) -> T                                                                |
| Index                    | arr[0]                                                                                                                                                                                                                                                                    | Index, IndexMut<br>Deref, DerefMut                                                                                                     |
| Error Check              | create_dir("tmp")?                                                                                                                                                                                                                                                        |                                                                                                                                        |
|                          |                                                                                                                                                                                                                                                                           |                                                                                                                                        |
| Logical/Bitwise NOT      | !ok                                                                                                                                                                                                                                                                       | Not                                                                                                                                    |
| Negation                 | -num                                                                                                                                                                                                                                                                      | Neg                                                                                                                                    |
| Dereference              | *ptr                                                                                                                                                                                                                                                                      | Deref, DerefMut                                                                                                                        |
| Borrow                   | &val                                                                                                                                                                                                                                                                      |                                                                                                                                        |
|                          |                                                                                                                                                                                                                                                                           |                                                                                                                                        |
| Type Cast                | x as u32                                                                                                                                                                                                                                                                  |                                                                                                                                        |
|                          |                                                                                                                                                                                                                                                                           |                                                                                                                                        |
| Multiplication           | n * 2                                                                                                                                                                                                                                                                     | Mul                                                                                                                                    |
| Devision                 | n / 2                                                                                                                                                                                                                                                                     | Div                                                                                                                                    |
| Remainder                | n % 2                                                                                                                                                                                                                                                                     | Rem                                                                                                                                    |
|                          |                                                                                                                                                                                                                                                                           |                                                                                                                                        |
| Addition                 | n + 2                                                                                                                                                                                                                                                                     | Add                                                                                                                                    |
| Subtraction              | n - 2                                                                                                                                                                                                                                                                     | Sub                                                                                                                                    |
|                          |                                                                                                                                                                                                                                                                           |                                                                                                                                        |
| Left Shift               | n << 1                                                                                                                                                                                                                                                                    | Shl                                                                                                                                    |
| Right Shift              | n >> 1                                                                                                                                                                                                                                                                    | Shr                                                                                                                                    |
|                          |                                                                                                                                                                                                                                                                           |                                                                                                                                        |
| Bitwise AND              | n & 1                                                                                                                                                                                                                                                                     | BitAnd                                                                                                                                 |
| Bitwise Exclusive OR     | n ^ 1                                                                                                                                                                                                                                                                     | BitXor                                                                                                                                 |
| Bitwise OR               | n \| 1                                                                                                                                                                                                                                                                    | BitOr                                                                                                                                  |
|                          |                                                                                                                                                                                                                                                                           |                                                                                                                                        |
| Less than                | n < 1                                                                                                                                                                                                                                                                     | std::cmp::PartialOrd                                                                                                                   |
| Less than or equal       | n <= 1                                                                                                                                                                                                                                                                    | std::cmp::PartialOrd                                                                                                                   |
| Greater than             | n \> 1                                                                                                                                                                                                                                                                    | std::cmp::PartialOrd                                                                                                                   |
| Greater than or equal    | n \>= 1                                                                                                                                                                                                                                                                   | std::cmp::PartialOrd                                                                                                                   |
| Equal                    | n == 1                                                                                                                                                                                                                                                                    | std::cmp::Eq                                                                                                                           |
| Not Equal                | n != 1                                                                                                                                                                                                                                                                    | std::cmp::Eq                                                                                                                           |
|                          |                                                                                                                                                                                                                                                                           |                                                                                                                                        |
| Logical AND              | x.ok && y.ok                                                                                                                                                                                                                                                              |                                                                                                                                        |
| Logical OR               | x.ok \|\| y.ok                                                                                                                                                                                                                                                            |                                                                                                                                        |
|                          |                                                                                                                                                                                                                                                                           |                                                                                                                                        |
| End-exclusive range      | start .. stop                                                                                                                                                                                                                                                             |                                                                                                                                        |
| End-inclusive range      | start ..= stop                                                                                                                                                                                                                                                            |                                                                                                                                        |
|                          |                                                                                                                                                                                                                                                                           |                                                                                                                                        |
| Assignment               | x = val                                                                                                                                                                                                                                                                   |                                                                                                                                        |
| Compound Assignment      | x \*= 1<br>x /= 1<br>x %= 1<br>x += 1<br>x -= 1<br>x <<= 1<br>x >>= 1<br>x &= 1<br>x ^= 1<br>x \|= 1                                                                                                                                                                      | MulAssign<br>DivAssign<br>RemAssign<br>AddAssign<br>SubAssign<br>ShlAssign<br>ShrAssign<br>BitAndAssign<br>BitXorAssign<br>BitOrAssign |
|                          |                                                                                                                                                                                                                                                                           |                                                                                                                                        |
| Closure                  | \|x, y\| x + y                                                                                                                                                                                                                                                            |                                                                                                                                        |

**All operators that can be chained are left associative.**
```rust
* /  % + - << >> & ^ | && | as
Meaning: a - b - c would result in (a - b) - c
```
